(()=>{"use strict";class e{constructor(e,t,n,r,a,l){this.a=e,this.b=t,this.c=n,this.d=r,this.e=a,this.d=r,this.pVnesh=l,this.param=this.param(),this.pTop=this.resultTop(),this.pVnutBP=this.resultVnut()}param(){return this.a-2*this.d}resultVnut(){return 2*(this.param+this.b-2*this.d)*this.c}resultTop(){return 2*(this.param+this.b)*this.d}resultPer1(){return this.param*this.c*2}resultPer2(){return this.e*this.c*2}resultDecrease(){return this.d*this.c*2}}class t extends e{resultTop2(){return super.resultTop()+(this.a-2*this.d)*this.d}resultVnut2(){let e=super.resultPer1(),t=super.resultDecrease();return this.pVnutBP+e-t}}class n extends t{resultTop3(){return super.resultTop2()+this.e*this.d}resultVnut3(){let e=super.resultPer1(),t=super.resultPer2(),n=2*super.resultDecrease();return this.pVnutBP+e+t-n}}class r extends n{resultTop4(){return super.resultTop2()+this.e*this.d*2}resultVnut4(){let e=super.resultPer1(),t=2*super.resultPer2(),n=3*super.resultDecrease();return this.pVnutBP+e+t-n}}function a(e,t,n,r){let a=e[t].pVneshBP+e[t].pTop+e[t].pVnut,l=(a-e[t].pTop)/n,u=e[t].pTop/r,o=e[t].pTop*n;return{area:a,pVneshBP:e[t].pVneshBP,pTop:e[t].pTop,pVnut:e[t].pVnut,perimeter:l,height:n,L:u,V:o}}const l=function(e,t,n,r){let a=[],l=[];const u=[a,l];for(let u=0;u<e.length;u++){if(void 0===e[u].value&&null===e[u].value||""!==e[u].value||"hidden"==e[u].type||(e[u].value=e[u].getAttribute("placeholder")),"container-consumption"!=e[u].name&&+e[u].min&&+e[u].value<+e[u].min){const a=r[u].innerText.slice(0,-1);return alert(a+"- значение  меньше минимального (min = "+e[u].min+")"),t.innerText="",void(n.innerText="")}isNaN(e[u].value)||"hidden"==e[u].type?l.push(e[u].value):(e[u].setAttribute("step",.01),a.push(+e[u].value))}return u},u=function(){const e=document.querySelector(".frm-inp"),t=e.querySelectorAll("input"),n=e.querySelectorAll('input[name="fundament-type"]'),r=e.querySelectorAll('input[name="type_fund[]"]'),a=e.querySelectorAll('input[name="type_fund_sv[]"]'),u=e.querySelectorAll('input[name="sv-type"]'),o=e.querySelectorAll("option"),s=e.querySelector("#sum"),c=e.querySelectorAll('input[name="material-type"]'),i=e.querySelector("#area"),m=e.querySelector("#volumeFund"),p=e.querySelector("#price"),h=e.querySelector("#quantity"),f=e.querySelector("#area1"),d=e.querySelectorAll("label"),y=document.querySelector("#volume"),T=document.querySelector("#description"),V=document.querySelector("#kilogram"),g=document.querySelector("#length");return{form:e,inputs:t,typeFundamenta:n,typeFundamentaLent:r,typeFundamentaSV:a,typeSV:u,options:o,select:s,materialType:c,areaElement:i,volumeFund:m,totalConsumptionElement:p,quantityElement:h,areaElement1:f,label:d,formatterInt:new Intl.NumberFormat("ru-RU"),arrValue:l(t,i,p,d),totalTran:y,description:T,kilogramText:V,lengthText:g}},o=u(),s=function(e=o.inputs){for(const t of e)t.addEventListener("input",(()=>{"calc-type"!=t.name?(o.select.value="20",o.areaElement.innerText="",o.volumeFund.innerText="",o.areaElement1.innerText="",o.totalConsumptionElement.innerText="",o.quantityElement.innerText="",o.kilogramText.innerText="",o.lengthText.innerText=""):(o.totalTran.innerText="",o.description.innerText="")}))},c=function(){const l=u(),o=l.arrValue[0][3],c=l.arrValue[0][4],i=l.arrValue[0][5],m=l.arrValue[0][6],p=l.arrValue[0][7],h=l.arrValue[0][11],f=l.arrValue[0][12],d=l.arrValue[0][13],y=l.arrValue[0][14];let T,V=l.arrValue[0][15],g={};const v=2*(o+c)*i,E=function(e,t,n,r){const a=e*t;return{pVneshBP:r,pTop:a,area:r+a,perimeter:2*(e+t),height:n,V:e*t*n}}(o,c,i,v),x=function(e,t,n,r){return[(e+t)*n*2+e*t,+(2*Math.PI*r*(n+r)).toFixed(2)]}(h,f,y,d),q=function(a,l,u,o,s,c){let i=new e(a,l,u,o,s,c);const m=i.resultVnut(),p=i.pTop;i.resultPer1(),i.resultPer2(),i.resultDecrease();let h={pVneshBP:c,pVnut:m,pTop:p},f=new t(a,l,u,o,s,c);const d=f.resultTop2();let y={pVneshBP:c,pVnut:f.resultVnut2(),pTop:d},T=new n(a,l,u,o,s,c);const V=T.resultTop3();let g={pVneshBP:c,pVnut:T.resultVnut3(),pTop:V},v=new r(a,l,u,o,s,c);const E=v.resultTop4();return[h,y,g,{pVneshBP:c,pVnut:v.resultVnut4(),pTop:E}]}(o,c,i,m,p,v);function S(){for(let e of l.typeFundamentaLent)if(e.checked)switch(e.value){case l.arrValue[1][0]:g=a(q,0,i,m);break;case l.arrValue[1][1]:g=a(q,1,i,m);break;case l.arrValue[1][2]:g=a(q,2,i,m);break;case l.arrValue[1][3]:g=a(q,3,i,m)}}function k(){for(let e of l.typeSV)e.checked&&"15"===e.value?T=x[0]:e.checked&&"16"===e.value&&(T=x[1]);T*=V;for(let e of l.typeFundamentaSV)if(e.checked){switch(e.value){case l.arrValue[1][4]:g=a(q,0,i,m);break;case l.arrValue[1][5]:g=a(q,1,i,m);break;case l.arrValue[1][6]:g=a(q,2,i,m);break;case l.arrValue[1][7]:g=a(q,3,i,m)}return g.area+=T,g.area}}!function(){if(m>o||m>c)return alert("D не корректно"),l.areaElement.innerText="",void(l.totalConsumptionElement.innerText="");!function(){for(let e of l.typeFundamenta)e.checked&&"0"===e.value?g=E:e.checked&&"1"===e.value?S():e.checked&&"2"===e.value&&k()}(),l.areaElement.innerText="Общая площадь "+l.formatterInt.format(g.area)+" м2",l.volumeFund.innerText="Объем "+l.formatterInt.format(g.V)+" м3",s()}();let b=l.inputs;return s(b),g.areaSv=T,g.d=m,g},i=function(){const e=document.querySelector(".form-opalubka"),t=e.querySelectorAll("input"),n=e.querySelector("#num-dosc"),r=e.querySelectorAll("label");l(t,n,r);const a=c();!function(){const e=t[0].value,r=t[1].value,l=a.perimeter,u=a.height,o=Math.ceil(u/e)*(l/r)*1.1;let s=function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?Math.abs(e)%10:5]]}(Math.ceil(o),[" доска"," доски"," досок"]);const c=new Intl.NumberFormat("ru-RU");n.innerText="Для данной длины фундамента (с учетом 10% запаса) необходимо "+c.format(Math.ceil(o))+s}()},m=function(e){const t=u(),n=c();let r=1.1*t.arrValue[0][18],a=n.area*r;null!=e&&(a=e*r);for(let e of t.materialType){let r="Количество банок ",l=t.arrValue[0][19],u=t.arrValue[0][20],o=t.arrValue[0][21];if(e.checked&&"8"===e.value)if(t.totalConsumptionElement.innerText="Для данной площади необходимо "+t.formatterInt.format(a)+" кг",l){let e=a/l;t.quantityElement.innerText=r+t.formatterInt.format(e)+" шт"}else t.quantityElement.innerText=" ";else if(e.checked&&"9"===e.value){r=" рул. ";const e=u*o;let a=n.area/e;t.totalConsumptionElement.innerText=t.formatterInt.format(a)+r,t.quantityElement.innerText=" "}}},p=function(e){const t=u(),n=c();t.select.addEventListener("change",(e=>{for(let r=0;r<t.options.length;r++)switch(e.target.value){case"20":getCalcTypeFund(),n.area,t.areaElement1.innerText="";break;case"21":n.area=n.pVneshBP,t.areaElement1.innerText="Внешняя поверхность "+t.formatterInt.format(n.area)+" м2";break;case"22":"0"===t.typeFundamenta[0].value&&t.typeFundamenta[0].checked?(n.area=0,t.areaElement1.innerText="Нет внутренней поверхности"):(n.area=n.pVnut,t.areaElement1.innerText="Внутренняя поверхность "+t.formatterInt.format(n.area)+" м2");break;case"23":n.area=n.pTop,t.areaElement1.innerText="Верхняя поверхность "+t.formatterInt.format(n.area)+" м2";break;case"24":"2"===t.typeFundamenta[2].value&&t.typeFundamenta[2].checked?(n.area=n.areaSv,t.areaElement1.innerText="Поверхность свай "+t.formatterInt.format(n.area)+" м2"):(n.area=0,t.areaElement1.innerText="Только для свайного фундамента")}m(n.area)}))};function h(){document.querySelector(".frm-inp").querySelector(".button").addEventListener("click",(function(e){c(),p()}))}function f(){document.querySelector(".button-gidr").addEventListener("click",(function(e){m(),p()}))}function d(){document.querySelector(".form-opalubka").querySelector(".button-opal").addEventListener("click",(function(e){i()}))}function y(){document.querySelector(".form-transhei").querySelector(".button-transh").addEventListener("click",(function(e){!function(){const e=document.querySelector(".form-transhei"),t=e.querySelectorAll("input"),n=e.querySelectorAll("label"),r=e.querySelectorAll('input[name="calc-type"]'),a=u(),o=a.totalTran,i=a.description,m=new Intl.NumberFormat("ru-RU");s(t),function(){l(t,o,n);const e=c(),a=t[3].value,u=e.d,s=u+.6,p=t[4].value,h=t[5].value,f=e.pTop/u;let d=0;!function(){for(let e of r)if(e.checked&&"0"===e.value)d=Math.ceil(f*s*a),i.innerText="Оптимальный наружный отступ (край углубления) от основных проектных границ здания - порядка 600 мм (учтен в расчете) для прохода и возможности выполнять монтаж.";else if(e.checked&&"1"===e.value){const e=s*p,t=s*h;d=Math.ceil((e+t)/2*f),i.innerText="Если углубление имеет вертикальные стенки с перепадом высот (дом на склоне) применяется расчет по площади сечений стен, имеющих разную высоту. Учтено в расчете 600 мм для прохода и возможности выполнять монтаж."}else if(e.checked&&"2"===e.value){const e=+t[6].value,n=+t[7].value;d=Math.ceil((e+n)/2*a),i.innerText=""}}(),o.innerText="Необходимо вырыть траншею объемом "+m.format(Math.ceil(d))+" м3"}()}()}))}function T(){document.querySelector(".frm-arm").querySelector(".button-arm").addEventListener("click",(function(e){!function(){const e=c(),t=u(),n=(document.querySelector(".frm-arm"),document.querySelector("#arm")),r=n.querySelectorAll("option");let a,l;switch(function(){for(let e of t.typeFundamenta)if(e.checked)switch(e.value){case"0":l=.018;break;case"1":case"2":l=.022}}(),n.value){case"0":a=0;case"10":a=.01;break;case"12":a=.012;break;case"14":a=.014;case"16":a=.016}n.addEventListener("change",(e=>{for(let e=0;e<r.length;e++)t.lengthText.innerText="",t.kilogramText.innerText=""}));const o=1e3*l*e.V,i=o/7850/(Math.PI*Math.pow(a/2,2));"0"!=n.value&&(t.kilogramText.innerText="Вес  "+t.formatterInt.format(o)+" кг",t.lengthText.innerText="Длина  "+t.formatterInt.format(i)+" м"),s()}()}))}document.addEventListener("DOMContentLoaded",(function(){if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("button-gidr").length&&0!==document.getElementsByClassName("form-opalubka").length&&0!==document.getElementsByClassName("form-transhei").length&&0!==document.getElementsByClassName("frm-arm").length)return h(),d(),y(),f(),void T();if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("form-opalubka").length&&0!==document.getElementsByClassName("form-transhei").length&&0!==document.getElementsByClassName("frm-arm").length)h(),d(),y();else if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("button-gidr").length)h(),f();else if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("form-opalubka").length)h(),d();else if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("form-transhei").length)h(),y();else if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("frm-arm").length)h(),T();else{if(0===document.getElementsByClassName("frm-inp").length)return;h()}}))})();