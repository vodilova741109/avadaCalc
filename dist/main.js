(()=>{"use strict";class e{constructor(e,t,n,r,a,l){this.a=e,this.b=t,this.c=n,this.d=r,this.e=a,this.d=r,this.pVnesh=l,this.param=this.param(),this.pTop=this.resultTop(),this.pVnutBP=this.resultVnut()}param(){return this.a-2*this.d}resultVnut(){return 2*(this.param+this.b-2*this.d)*this.c}resultTop(){return 2*(this.param+this.b)*this.d}resultPer1(){return this.param*this.c*2}resultPer2(){return this.e*this.c*2}resultDecrease(){return this.d*this.c*2}}class t extends e{resultTop2(){return super.resultTop()+(this.a-2*this.d)*this.d}resultVnut2(){let e=super.resultPer1(),t=super.resultDecrease();return this.pVnutBP+e-t}}class n extends t{resultTop3(){return super.resultTop2()+this.e*this.d}resultVnut3(){let e=super.resultPer1(),t=super.resultPer2(),n=2*super.resultDecrease();return this.pVnutBP+e+t-n}}class r extends n{resultTop4(){return super.resultTop2()+this.e*this.d*2}resultVnut4(){let e=super.resultPer1(),t=2*super.resultPer2(),n=3*super.resultDecrease();return this.pVnutBP+e+t-n}}function a(e,t,n,r){let a=e[t].pVneshBP+e[t].pTop+e[t].pVnut,l=(a-e[t].pTop)/n,u=e[t].pTop/r,o=e[t].pTop*n;return{area:a,pVneshBP:e[t].pVneshBP,pTop:e[t].pTop,pVnut:e[t].pVnut,perimeter:l,height:n,L:u,V:o}}const l=function(e,t,n,r){let a=[],l=[];const u=[a,l];for(let u=0;u<e.length;u++){if(void 0===e[u].value&&null===e[u].value||""!==e[u].value||"hidden"==e[u].type||(e[u].value=e[u].getAttribute("placeholder")),"container-consumption"!=e[u].name&&+e[u].min&&+e[u].value<+e[u].min){const a=r[u].innerText.slice(0,-1);return alert(a+"- значение  меньше минимального (min = "+e[u].min+")"),t.innerText="",void(n.innerText="")}isNaN(e[u].value)||"hidden"==e[u].type?l.push(e[u].value):(e[u].setAttribute("step",.01),a.push(+e[u].value))}return u},u=function(){const e=document.querySelector(".frm-inp"),t=e.querySelectorAll("input"),n=e.querySelectorAll('input[name="fundament-type"]'),r=e.querySelectorAll('input[name="type_fund[]"]'),a=e.querySelectorAll('input[name="type_fund_sv[]"]'),u=e.querySelectorAll('input[name="sv-type"]'),o=e.querySelectorAll("option"),s=e.querySelector("#sum"),i=e.querySelectorAll('input[name="material-type"]'),c=e.querySelector("#area"),m=e.querySelector("#volumeFund"),p=e.querySelector("#price"),h=e.querySelector("#quantity"),d=e.querySelector("#area1"),f=e.querySelectorAll("label"),y=document.querySelector("#volume"),T=document.querySelector("#description");return{form:e,inputs:t,typeFundamenta:n,typeFundamentaLent:r,typeFundamentaSV:a,typeSV:u,options:o,select:s,materialType:i,areaElement:c,volumeFund:m,totalConsumptionElement:p,quantityElement:h,areaElement1:d,label:f,formatterInt:new Intl.NumberFormat("ru-RU"),arrValue:l(t,c,p,f),totalTran:y,description:T}},o=u(),s=function(e=o.inputs){for(const t of e)t.addEventListener("input",(()=>{"calc-type"!=t.name?(o.select.value="20",o.areaElement.innerText="",o.volumeFund.innerText="",o.areaElement1.innerText="",o.totalConsumptionElement.innerText="",o.quantityElement.innerText=""):(o.totalTran.innerText="",o.description.innerText="")}))},i=function(){const l=u(),o=l.arrValue[0][3],i=l.arrValue[0][4],c=l.arrValue[0][5],m=l.arrValue[0][6],p=l.arrValue[0][7],h=l.arrValue[0][11],d=l.arrValue[0][12],f=l.arrValue[0][13],y=l.arrValue[0][14];let T,V=l.arrValue[0][15],v={};const E=2*(o+i)*c,g=function(e,t,n,r){const a=e*t;return{pVneshBP:r,pTop:a,area:r+a,perimeter:2*(e+t),height:n,V:e*t*n}}(o,i,c,E),q=function(e,t,n,r){return[(e+t)*n*2+e*t,+(2*Math.PI*r*(n+r)).toFixed(2)]}(h,d,y,f),S=function(a,l,u,o,s,i){let c=new e(a,l,u,o,s,i);const m=c.resultVnut(),p=c.pTop;c.resultPer1(),c.resultPer2(),c.resultDecrease();let h={pVneshBP:i,pVnut:m,pTop:p},d=new t(a,l,u,o,s,i);const f=d.resultTop2();let y={pVneshBP:i,pVnut:d.resultVnut2(),pTop:f},T=new n(a,l,u,o,s,i);const V=T.resultTop3();let v={pVneshBP:i,pVnut:T.resultVnut3(),pTop:V},E=new r(a,l,u,o,s,i);const g=E.resultTop4();return[h,y,v,{pVneshBP:i,pVnut:E.resultVnut4(),pTop:g}]}(o,i,c,m,p,E);function x(){for(let e of l.typeFundamentaLent)if(e.checked)switch(e.value){case l.arrValue[1][0]:v=a(S,0,c,m);break;case l.arrValue[1][1]:v=a(S,1,c,m);break;case l.arrValue[1][2]:v=a(S,2,c,m);break;case l.arrValue[1][3]:v=a(S,3,c,m)}}function b(){for(let e of l.typeSV)e.checked&&"15"===e.value?T=q[0]:e.checked&&"16"===e.value&&(T=q[1]);T*=V;for(let e of l.typeFundamentaSV)if(e.checked){switch(e.value){case l.arrValue[1][4]:v=a(S,0,c,m);break;case l.arrValue[1][5]:v=a(S,1,c,m);break;case l.arrValue[1][6]:v=a(S,2,c,m);break;case l.arrValue[1][7]:v=a(S,3,c,m)}return v.area+=T,v.area}}!function(){if(m>o||m>i)return alert("D не корректно"),l.areaElement.innerText="",void(l.totalConsumptionElement.innerText="");!function(){for(let e of l.typeFundamenta)e.checked&&"0"===e.value?v=g:e.checked&&"1"===e.value?x():e.checked&&"2"===e.value&&b()}(),l.areaElement.innerText="Общая площадь "+l.formatterInt.format(v.area)+" м2",l.volumeFund.innerText="Объем "+l.formatterInt.format(v.V)+" м3",s()}();let k=l.inputs;return s(k),v.areaSv=T,v.d=m,v},c=function(){const e=document.querySelector(".form-opalubka"),t=e.querySelectorAll("input"),n=e.querySelector("#num-dosc"),r=e.querySelectorAll("label");l(t,n,r);const a=i();!function(){const e=t[0].value,r=t[1].value,l=a.perimeter,u=a.height,o=Math.ceil(u/e)*(l/r)*1.1;let s=function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?Math.abs(e)%10:5]]}(Math.ceil(o),[" доска"," доски"," досок"]);const i=new Intl.NumberFormat("ru-RU");n.innerText="Для данной длины фундамента (с учетом 10% запаса) необходимо "+i.format(Math.ceil(o))+s}()},m=function(e){const t=u(),n=i();let r=1.1*t.arrValue[0][18],a=n.area*r;null!=e&&(a=e*r);for(let e of t.materialType){let r="Количество банок ",l=t.arrValue[0][19],u=t.arrValue[0][20],o=t.arrValue[0][21];if(e.checked&&"8"===e.value)if(t.totalConsumptionElement.innerText="Для данной площади необходимо "+t.formatterInt.format(a)+" кг",l){let e=a/l;t.quantityElement.innerText=r+t.formatterInt.format(e)+" шт"}else t.quantityElement.innerText=" ";else if(e.checked&&"9"===e.value){r=" рул. ";const e=u*o;let a=n.area/e;t.totalConsumptionElement.innerText=t.formatterInt.format(a)+r,t.quantityElement.innerText=" "}}},p=function(e){const t=u(),n=i();t.select.addEventListener("change",(e=>{for(let r=0;r<t.options.length;r++)switch(e.target.value){case"20":getCalcTypeFund(),n.area,t.areaElement1.innerText="";break;case"21":n.area=n.pVneshBP,t.areaElement1.innerText="Внешняя поверхность "+t.formatterInt.format(n.area)+" м2";break;case"22":"0"===t.typeFundamenta[0].value&&t.typeFundamenta[0].checked?(n.area=0,t.areaElement1.innerText="Нет внутренней поверхности"):(n.area=n.pVnut,t.areaElement1.innerText="Внутренняя поверхность "+t.formatterInt.format(n.area)+" м2");break;case"23":n.area=n.pTop,t.areaElement1.innerText="Верхняя поверхность "+t.formatterInt.format(n.area)+" м2";break;case"24":"2"===t.typeFundamenta[2].value&&t.typeFundamenta[2].checked?(n.area=n.areaSv,t.areaElement1.innerText="Поверхность свай "+t.formatterInt.format(n.area)+" м2"):(n.area=0,t.areaElement1.innerText="Только для свайного фундамента")}m(n.area)}))};function h(){document.querySelector(".frm-inp").querySelector(".button").addEventListener("click",(function(e){i(),p()}))}function d(){document.querySelector(".button-gidr").addEventListener("click",(function(e){m(),p()}))}function f(){document.querySelector(".form-opalubka").querySelector(".button-opal").addEventListener("click",(function(e){c()}))}function y(){document.querySelector(".form-transhei").querySelector(".button-transh").addEventListener("click",(function(e){!function(){const e=document.querySelector(".form-transhei"),t=e.querySelectorAll("input"),n=e.querySelectorAll("label"),r=e.querySelectorAll('input[name="calc-type"]'),a=u(),o=a.totalTran,c=a.description,m=new Intl.NumberFormat("ru-RU");s(t),function(){l(t,o,n);const e=i(),a=t[3].value,u=e.d,s=u+.6,p=t[4].value,h=t[5].value,d=e.pTop/u;let f=0;!function(){for(let e of r)if(e.checked&&"0"===e.value)f=Math.ceil(d*s*a),c.innerText="Оптимальный наружный отступ (край углубления) от основных проектных границ здания - порядка 600 мм (учтен в расчете) для прохода и возможности выполнять монтаж.";else if(e.checked&&"1"===e.value){const e=s*p,t=s*h;f=Math.ceil((e+t)/2*d),c.innerText="Если углубление имеет вертикальные стенки с перепадом высот (дом на склоне) применяется расчет по площади сечений стен, имеющих разную высоту. Учтено в расчете 600 мм для прохода и возможности выполнять монтаж."}else if(e.checked&&"2"===e.value){const e=+t[6].value,n=+t[7].value;f=Math.ceil((e+n)/2*a),c.innerText=""}}(),o.innerText="Необходимо вырыть траншею объемом "+m.format(Math.ceil(f))+" м3"}()}()}))}document.addEventListener("DOMContentLoaded",(function(){if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("button-gidr").length&&0!==document.getElementsByClassName("form-opalubka").length&&0!==document.getElementsByClassName("form-transhei").length)return h(),f(),y(),void d();if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("form-opalubka").length&&0!==document.getElementsByClassName("form-transhei").length)h(),f(),y();else if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("button-gidr").length)h(),d();else if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("form-opalubka").length)h(),f();else if(0!==document.getElementsByClassName("frm-inp").length&&0!==document.getElementsByClassName("form-transhei").length)h(),y();else{if(0===document.getElementsByClassName("frm-inp").length)return;h()}}))})();