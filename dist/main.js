(()=>{"use strict";class e{constructor(e,t,r,n,a,u){this.a=e,this.b=t,this.c=r,this.d=n,this.e=a,this.d=n,this.pVnesh=u,this.param=this.param(),this.pTop=this.resultTop(),this.pVnutBP=this.resultVnut()}param(){return this.a-2*this.d}resultVnut(){return 2*(this.param+this.b-2*this.d)*this.c}resultTop(){return 2*(this.param+this.b)*this.d}resultPer1(){return this.param*this.c*2}resultPer2(){return this.e*this.c*2}resultDecrease(){return this.d*this.c*2}}class t extends e{resultTop2(){return super.resultTop()+(this.a-2*this.d)*this.d}resultVnut2(){let e=super.resultPer1(),t=super.resultDecrease();return this.pVnutBP+e-t}}class r extends t{resultTop3(){return super.resultTop2()+this.e*this.d}resultVnut3(){let e=super.resultPer1(),t=super.resultPer2(),r=2*super.resultDecrease();return this.pVnutBP+e+t-r}}class n extends r{resultTop4(){return super.resultTop2()+this.e*this.d*2}resultVnut4(){let e=super.resultPer1(),t=2*super.resultPer2(),r=3*super.resultDecrease();return this.pVnutBP+e+t-r}}function a(e,t,r,n){let a=e[t].pVneshBP+e[t].pTop+e[t].pVnut,u=(a-e[t].pTop)/r,l=e[t].pTop/n;return{area:a,pVneshBP:e[t].pVneshBP,pTop:e[t].pTop,pVnut:e[t].pVnut,perimeter:u,height:r,L:l}}const u=function(e,t,r,n){let a=[],u=[];const l=[a,u];for(let l=0;l<e.length;l++){if(void 0===e[l].value&&null===e[l].value||""!==e[l].value||(e[l].value=e[l].getAttribute("placeholder")),"container-consumption"!=e[l].name&&+e[l].min&&+e[l].value<+e[l].min){const a=n[l].innerText.slice(0,-1);return alert(a+"- значение  меньше минимального (min = "+e[l].min+")"),t.innerText="",void(r.innerText="")}isNaN(e[l].value)?u.push(e[l].value):(e[l].setAttribute("step",.01),a.push(+e[l].value))}return l},l=function(){const e=document.querySelector(".frm-inp"),t=e.querySelectorAll("input"),r=e.querySelectorAll('input[name="fundament-type"]'),n=e.querySelectorAll('input[name="type_fund[]"]'),a=e.querySelectorAll('input[name="type_fund_sv[]"]'),l=e.querySelectorAll('input[name="sv-type"]'),o=e.querySelectorAll("option"),s=e.querySelector("#sum"),i=e.querySelectorAll('input[name="material-type"]'),c=e.querySelector("#area"),p=e.querySelector("#price"),m=e.querySelector("#quantity"),h=e.querySelector("#area1"),f=e.querySelectorAll("label"),d=document.querySelector("#volume"),T=document.querySelector("#description");return{form:e,inputs:t,typeFundamenta:r,typeFundamentaLent:n,typeFundamentaSV:a,typeSV:l,options:o,select:s,materialType:i,areaElement:c,totalConsumptionElement:p,quantityElement:m,areaElement1:h,label:f,formatterInt:new Intl.NumberFormat("ru-RU"),arrValue:u(t,c,p,f),totalTran:d,description:T}},o=l(),s=function(e=o.inputs){for(const t of e)t.addEventListener("input",(()=>{"calc-type"!=t.name?(o.select.value="20",o.areaElement.innerText="",o.areaElement1.innerText="",o.totalConsumptionElement.innerText="",o.quantityElement.innerText=""):(o.totalTran.innerText="",o.description.innerText="")}))},i=function(){const u=l(),o=u.arrValue[0][3],i=u.arrValue[0][4],c=u.arrValue[0][5],p=u.arrValue[0][6],m=u.arrValue[0][7],h=u.arrValue[0][11],f=u.arrValue[0][12],d=u.arrValue[0][13],T=u.arrValue[0][14];let y,V=u.arrValue[0][15],v={};const q=2*(o+i)*c,S=function(e,t,r,n){const a=e*t;return{pVneshBP:n,pTop:a,area:n+a,perimeter:2*(e+t),height:r}}(o,i,c,q),x=function(e,t,r,n){return[(e+t)*r*2+e*t,+(2*Math.PI*n*(r+n)).toFixed(2)]}(h,f,T,d),k=function(a,u,l,o,s,i){let c=new e(a,u,l,o,s,i);const p=c.resultVnut(),m=c.pTop;c.resultPer1(),c.resultPer2(),c.resultDecrease();let h={pVneshBP:i,pVnut:p,pTop:m},f=new t(a,u,l,o,s,i);const d=f.resultTop2();let T={pVneshBP:i,pVnut:f.resultVnut2(),pTop:d},y=new r(a,u,l,o,s,i);const V=y.resultTop3();let v={pVneshBP:i,pVnut:y.resultVnut3(),pTop:V},q=new n(a,u,l,o,s,i);const S=q.resultTop4();return[h,T,v,{pVneshBP:i,pVnut:q.resultVnut4(),pTop:S}]}(o,i,c,p,m,q);function E(){for(let e of u.typeFundamentaLent)if(e.checked)switch(e.value){case u.arrValue[1][0]:v=a(k,0,c,p);break;case u.arrValue[1][1]:v=a(k,1,c,p);break;case u.arrValue[1][2]:v=a(k,2,c,p);break;case u.arrValue[1][3]:v=a(k,3,c,p)}}function b(){for(let e of u.typeSV)e.checked&&"15"===e.value?y=x[0]:e.checked&&"16"===e.value&&(y=x[1]);y*=V;for(let e of u.typeFundamentaSV)if(e.checked){switch(e.value){case u.arrValue[1][4]:v=a(k,0,c,p);break;case u.arrValue[1][5]:v=a(k,1,c,p);break;case u.arrValue[1][6]:v=a(k,2,c,p);break;case u.arrValue[1][7]:v=a(k,3,c,p)}return v.area+=y,v.area}}!function(){if(p>o||p>i)return alert("D не корректно"),u.areaElement.innerText="",void(u.totalConsumptionElement.innerText="");!function(){for(let e of u.typeFundamenta)e.checked&&"0"===e.value?v=S:e.checked&&"1"===e.value?E():e.checked&&"2"===e.value&&b()}(),u.areaElement.innerText="Общая площадь "+u.formatterInt.format(v.area)+" м2",s()}();let P=u.inputs;return s(P),v.areaSv=y,v.d=p,v},c=function(){const e=document.querySelector(".form-opalubka"),t=e.querySelectorAll("input"),r=e.querySelector("#num-dosc"),n=e.querySelectorAll("label");u(t,r,n);const a=i();!function(){const e=t[0].value,n=t[1].value,u=a.perimeter,l=a.height,o=Math.ceil(l/e)*(u/n)*1.1;let s=function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?Math.abs(e)%10:5]]}(Math.ceil(o),[" доска"," доски"," досок"]);const i=new Intl.NumberFormat("ru-RU");r.innerText="Для данной длины фундамента (с учетом 10% запаса) необходимо "+i.format(Math.ceil(o))+s}()},p=function(e){const t=l(),r=i();let n=1.1*t.arrValue[0][18],a=r.area*n;null!=e&&(a=e*n);for(let e of t.materialType){let n="Количество банок ",u=t.arrValue[0][19],l=t.arrValue[0][20],o=t.arrValue[0][21];if(e.checked&&"8"===e.value)if(t.totalConsumptionElement.innerText="Для данной площади необходимо "+t.formatterInt.format(a)+" кг",u){let e=a/u;t.quantityElement.innerText=n+t.formatterInt.format(e)+" шт"}else t.quantityElement.innerText=" ";else if(e.checked&&"9"===e.value){n=" рул. ";const e=l*o;let a=r.area/e;t.totalConsumptionElement.innerText=t.formatterInt.format(a)+n,t.quantityElement.innerText=" "}}};document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".frm-inp").querySelector(".button").addEventListener("click",(function(e){i(),p(),function(e){const t=l(),r=i();t.select.addEventListener("change",(e=>{for(let n=0;n<t.options.length;n++)switch(e.target.value){case"20":getCalcTypeFund(),r.area,t.areaElement1.innerText="";break;case"21":r.area=r.pVneshBP,t.areaElement1.innerText="Внешняя поверхность "+t.formatterInt.format(r.area)+" м2";break;case"22":"0"===t.typeFundamenta[0].value&&t.typeFundamenta[0].checked?(r.area=0,t.areaElement1.innerText="Нет внутренней поверхности"):(r.area=r.pVnut,t.areaElement1.innerText="Внутренняя поверхность "+t.formatterInt.format(r.area)+" м2");break;case"23":r.area=r.pTop,t.areaElement1.innerText="Верхняя поверхность "+t.formatterInt.format(r.area)+" м2";break;case"24":"2"===t.typeFundamenta[2].value&&t.typeFundamenta[2].checked?(r.area=r.areaSv,t.areaElement1.innerText="Поверхность свай "+t.formatterInt.format(r.area)+" м2"):(r.area=0,t.areaElement1.innerText="Только для свайного фундамента")}p(r.area)}))}()})),document.querySelector(".form-opalubka").querySelector(".button-opal").addEventListener("click",(function(e){c()})),document.querySelector(".form-transhei").querySelector(".button-transh").addEventListener("click",(function(e){!function(){const e=document.querySelector(".form-transhei"),t=e.querySelectorAll("input"),r=e.querySelectorAll("label"),n=e.querySelectorAll('input[name="calc-type"]'),a=l(),o=a.totalTran,c=a.description,p=new Intl.NumberFormat("ru-RU");s(t),function(){u(t,o,r);const e=i(),a=t[3].value,l=e.d,s=l+.6,m=t[4].value,h=t[5].value,f=e.pTop/l;let d=0;!function(){for(let e of n)if(e.checked&&"0"===e.value)d=Math.ceil(f*s*a),c.innerText="Оптимальный наружный отступ (край углубления) от основных проектных границ здания - порядка 600 мм (учтен в расчете) для прохода и возможности выполнять монтаж.";else if(e.checked&&"1"===e.value){const e=s*m,t=s*h;d=Math.ceil((e+t)/2*f),c.innerText="Если углубление имеет вертикальные стенки с перепадом высот (дом на склоне) применяется расчет по площади сечений стен, имеющих разную высоту. Учтено в расчете 600 мм для прохода и возможности выполнять монтаж."}else if(e.checked&&"2"===e.value){const e=+t[6].value,r=+t[7].value;d=Math.ceil((e+r)/2*a),c.innerText=""}}(),o.innerText="Необходимо вырыть траншею объемом "+p.format(Math.ceil(d))+" м3"}()}()}))}))})();